<!DOCTYPE html>
<html>
<head>
  <title>Aula 1 - No√ß√µes b√°sicas</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="" />
  <meta name="author" content="julio.trecenti@gmail.com,curso-r,Curso,R">
  <link rel="shortcut icon" href="/assets/img/curso_r2.jpg">
  <link rel="alternate" type="application/rss+xml" href="">
  <link href="../libraries/frameworks/purus/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../libraries/frameworks/purus/css/bootstrap-responsive.min.css" rel="stylesheet" />
  <link href="../libraries/frameworks/purus/css/main.css" rel="stylesheet" />
  <link href="../libraries/highlighters/prettify/css/twitter-bootstrap.css" rel="stylesheet">
  <!-- IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href='http://fonts.googleapis.com/css?family=Raleway:400,600,200,800' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-58167912-1', 'auto');
    ga('send', 'pageview');
  
  </script>
    <style>
	  #sidebar .sidebar-nav .info h3 a:hover, a:hover { color: #01A9DB; }
	  #sidebar .sidebar-nav #avatar img, #sidebar .sidebar-nav ul#links li.active a { border-color: #01A9DB; }
	  #sidebar .sidebar-nav ul#links li a:hover { background: #01A9DB; }
    p {text-align: justify;}
  </style>
  <link rel="stylesheet" href = "../assets/css/custom.css">
<link rel="stylesheet" href = "../assets/css/ribbons.css">

</head>
<body>
	<div class="container-fluid">
		<div class="row-fluid">
			<div id="sidebar" class="span2">
			  <div class="sidebar-nav sidebar-nav-fixed">
			    <a href="https://github.com/ramnathv/poirot">
      <img style="position: absolute; top: 0; left: 100px; border: 0; height: 100px; z-index: 1;" 
        alt="Fork me on GitHub" 
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" >
    </a>
	  <div class="info">
				    <p id="avatar"><a href="#"><img alt="Title" src="http://curso-r.github.io/assets/img/curso_r2.jpg " /></a></p>
				    <h3><a href="/">Curso R </a></h3>
					  <p class="description">Do casual ao avan√ßado</p>
					</div>
					<ul id="links">
			        <li><a href="http://curso-r.github.io/index.html">Home</a></li>
        <li><a href="http://curso-r.github.io/about.html">Sobre</a></li>
      
        <li><a href="http://github.com/curso-r" id="Github-link">Github</a></li>
                      
			    </ul>
				</div>
			</div>
						<div id="content" class='span10'>
				<div id="post-wrapper">
          <ol id="posts">
            <li class="post">
              <h3>
                <a href="#">Aula 1 - No√ß√µes b√°sicas</a>
              </h3>
              <span>NA</span><br/>
               <a class='label label-success' href='posts/aula01.Rmd'>Source</a>
              <h1>R como calculadora</h1>
<p>A linguagem do R √© um tanto quanto intuitiva, muita coisa sai do jeito certo no chute! Para ver um exemplo disso, √© interessante come√ßar fazendo do R uma grande calculadora. Tente jogar no console <code>2*2 - (4 + 4)/2</code>. Pronto. Com essa simples express√£o voc√™ j√° √© capaz de imaginar (e certeiramente) como pedir ao R para fazer qualquer tipo de opera√ß√£o aritm√©tica. Li√ß√£o aprendida!</p>

<p>Al√©m do mais, as opera√ß√µes e suas preced√™ncias s√£o mantidas como na matem√°tica, ou seja, divis√£o e multiplica√ß√£o s√£o calculadas antes da adi√ß√£o e subtra√ß√£o. E os par√™nteses nunca s√£o demais!</p>

<p>Falando em matem√°tica, o \(\pi\) j√° vem definido!</p>

<pre><code class="r">pi
</code></pre>

<pre><code>## [1] 3.141593
</code></pre>

<pre><code class="r">sin(pi/2) + 2*3
</code></pre>

<pre><code>## [1] 7
</code></pre>

<pre><code class="r">(sin(pi/2) + 2)*3
</code></pre>

<pre><code>## [1] 9
</code></pre>

<p>Veja que apareceu a fun√ß√£o <code>sin()</code>, o famoso seno. Tente outras fun√ß√µes trigonom√©tricas para ver se acerta de prima!</p>

<p>Mas a ideia √© essa. Ser intuitivo. A dica aqui √© tentar! No R, um erro n√£o √© nenhuma dor de cabe√ßa, √© r√°pido consertar e testar (<strong>debugar</strong>, para os mais √≠ntimos).</p>

<h2>Valores especiais</h2>

<p>Certas opera√ß√µes matem√°ticas podem suscitar em valores n√£o num√©ricos. Exemplo disso s√£o log de n√∫meros negativos e divis√µes por zero. Para tais opera√ß√µes, o R reservou valores especiais para serem retornadas quando opera√ß√µes n√£o resultarem em um n√∫mero propriamente dito. A tabela abaixo lista esses objetos:</p>

<h2>Operadores aritm√©ticos</h2>

<p>Os bons e conhecidos operadores aritm√©ticos. Com n√∫meros reais eles funcionam como na matem√°tica, mas ao sa√≠rmos da reta, eles podem fazer muito mais!</p>


<p>operador             descricao           </p>

<hr>

<p>x + y         Adi√ß√£o de x com y      </p>

<p>x - y        Subtra√ß√£o de y em x     </p>

<p>x * y       Multiplica√ß√£o de x e y   </p>

<p>x / y         Divis√£o de x por y      </p>

<p>x<sup>y</sup> ou x**y x elevado a y-√©sima pot√™ncia</p>

<p>x%%y      Resto da divis√£o de x por y 
                      (m√≥dulo)           </p>

<p>x%/%y    Parte inteira da divis√£o de x</p>

<h2>                        por y             </h2>

<pre><code class="r">1 + 1
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">10 - 8
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">2*10
</code></pre>

<pre><code>## [1] 20
</code></pre>

<pre><code class="r">18/3
</code></pre>

<pre><code>## [1] 6
</code></pre>

<pre><code class="r">2^4
</code></pre>

<pre><code>## [1] 16
</code></pre>

<pre><code class="r">9%%2
</code></pre>

<pre><code>## [1] 1
</code></pre>

<pre><code class="r">9%/%2
</code></pre>

<pre><code>## [1] 4
</code></pre>

<h2>Operadores l√≥gicos</h2>

<p>Operadores l√≥gicos retornar√£o sempre ou <code>TRUE</code> ou <code>FALSE</code>. Eles definem perguntas que aceitam apenas verdadeiro e falso como resposta, como sugere o quadro abaixo.</p>


<p>operador         descricao        </p>

<hr>

<p>x &lt; y         x menor que y?     </p>

<p>x &lt;= y    x menor ou igual a y?  </p>

<p>x &gt; y         x maior que y?     </p>

<p>x &gt;= y    x maior ou igual a y?  </p>

<p>x == y         x igual a y?      </p>

<p>x != y      x diferente de y?    </p>

<pre><code>!x          Negativa de x      
</code></pre>

<p>x | y    x ou y s√£o verdadeiros?</p>

<p>x &amp; y    x e y s√£o verdadeiros? </p>

<p>xor(x, y)  x ou y s√£o verdadeiros </p>

<h2>              (apenas um deles)?   </h2>

<p>Exemplos:</p>

<pre><code class="r">1 &lt; 1
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">1 &lt;= 1
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">1 == 0.999
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">1 == 0.99999999999999999
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">13.5 != 13.5
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">!TRUE
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">TRUE | FALSE
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">FALSE | FALSE
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">TRUE &amp; FALSE
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">TRUE &amp; TRUE
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">xor(TRUE, TRUE)
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">xor(TRUE, FALSE)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">TRUE == 1
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">TRUE == 2
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">FALSE == 0
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<h2>N√∫meros complexos</h2>

<p>O R manipula n√∫meros complexo de maneira f√°cil e intuitiva do mesmo jeito que trata os n√∫meros reais. Al√©m disso, disponibiliza fun√ß√µes √∫teis para eles, como m√≥dulo, conjugado e argumento.</p>

<pre><code class="r">x &lt;- -8 + 0i

# verifica se x √© um n√∫mero commplexo
class(x)
</code></pre>

<pre><code>## [1] &quot;complex&quot;
</code></pre>

<pre><code class="r">is.complex(x)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>A tabela abaixo resume algumas fun√ß√µes interessantes para n√∫meros complexos.</p>


<p>Fun√.√.o        Descri√.√.o      </p>

<hr>

<p>Re(z)        Parte real de x    </p>

<p>Im(z)    Parte imagin√°ria de x </p>

<p>Mod(z)        M√≥dulo de x      </p>

<p>Arg(z)       Argumento de x     </p>

<h2> Conj(z)   Complexo conjugado de x</h2>

<p>Demais fun√ß√µes matem√°ticas, como logaritmo, fun√ß√µes trigonom√©tricas, exponencial e radicia√ß√£o tamb√©m est√£o implementadas para n√∫meros complexos.</p>

<h1>Controle de fluxo (<em>flow controls</em>)</h1>

<h2>Sum√°rio</h2>

<ul>
<li>if, else, else if: testa uma condi√ß√£o</li>
<li>for, while: &quot;la√ßos&quot; ou itera√ß√µes</li>
<li>break, next: a√ß√µes dentro de la√ßos</li>
</ul>

<h2>if, else e else if</h2>

<h3>Estrutura:</h3>

<pre><code class="r">if(&lt;condi√ß√£o1&gt;) {
  # se a condi√ß√£o1 for verdadeira...
  # faz coisas interessantes.
} else if (&lt;condi√ß√£o2&gt;) {
  # caso a condi√ß√£o1 seja falsa e a condi√ß√£o2 seja verdadeira...
  # faz coisas legais para este caso.
} else {
  # faz coisas necess√°rias caso todas as condi√ß√µes anteriores falharem
}
</code></pre>

<p>As condi√ß√µes devem ser express√µes l√≥gicas, ou seja, testes que retornem <code>TRUE</code> ou <code>FALSE</code>. Assim, o c√≥digo entre <code>{}</code> ser√° executado se a condi√ß√£o for <code>TRUE</code> ou ser√° ignorada se a condi√ß√£o retornar <code>FALSE</code>.</p>

<h3>Exemplo:</h3>

<pre><code class="r">x &lt;- 4

# teste: x N√ÉO √© um n√∫mero?
!is.numeric(x)
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r"># teste: x √© menor que zero?
x &lt; 0
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r"># teste: x √© maior que zero?
x &gt; 0
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">if(!is.numeric(x)) {
  &quot;x n√£o √© um n√∫mero&quot;
} else if(x &gt; 0) {
  &quot;x √© positivo&quot;
} else if(x &lt; 0) {
  &quot;x √© negativo&quot;
} else {
  &quot;x √© nulo&quot;
}
</code></pre>

<pre><code>## [1] &quot;x √© positivo&quot;
</code></pre>

<p>O que acontece no exemplo acima, passo a passo:</p>

<ol>
<li><p>A express√£o <code>!is.numeric(x)</code> testa se <code>x</code> N√ÉO √© um n√∫mero. Como <code>x</code> vale 4, ele retorna <code>FALSE</code>. Assim, a express√£o <code>{&quot;x n√£o √© um n√∫mero&quot;}</code> n√£o √© executada e a pr√≥xima condi√ß√£o √© testada;</p></li>
<li><p>No primeiro <code>else if</code>, o teste l√≥gico <code>x &gt; 0</code> retorna <code>TRUE</code>, fazendo com que a express√£o <code>{&quot;x √© positivo&quot;}</code> seja executada e todo o restante dos testes, ignorado.</p></li>
</ol>

<p><strong>OBS:</strong> a condi√ß√µes <code>x &lt; 0</code> nunca chegou a ser testada. Uma vez encontrada uma condi√ß√£o verdadeira, o programa executa o respectivo bloco de c√≥digos entre <code>{}</code> e descarta as demais instru√ß√µes.</p>

<h3>Considera√ß√µes:</h3>

<ul>
<li>O <code>else</code> e o <code>else if</code> t√™m que estar na mesma linha do <code>}</code> da express√£o anterior, sen√£o n√£o rodar√°!</li>
</ul>

<pre><code class="r">#Certo
if(1 == 2) {
  &quot;Um resultado muito interessante!&quot;
} else { # &lt;----- Mesma linha que o &quot;}&quot;
  &quot;1 √© diferente de 2&quot;
}

# ERRADO!!! N√£o rodar√°
if(1 == 2) {
  &quot;Um resultado muito interessante!&quot;
}
else { # &lt;----- Na linha abaixo do &quot;}&quot;
  &quot;1 √© diferente de 2&quot;
}
</code></pre>

<ul>
<li><p>Al√©m de <code>TRUE</code> e <code>FALSE</code>, o R aceita <code>1</code> e <code>0</code>, respectivamente. Na verdade, n√£o precisa ser <code>1</code> exatamente, a regra √©: </p>

<ul>
<li>n√∫mero diferente de zero √© <code>TRUE</code>; e </li>
<li>n√∫mero igual a zero √© <code>FALSE</code>.</li>
</ul></li>
<li><p>Objetos <code>character</code>, <code>NA</code>, <code>NaN</code> e <code>list</code> n√£o s√£o interpret√°veis como l√≥gicos. Ser√° retornado um erro caso tente pass√°-los como condi√ß√µes.</p></li>
<li><p>Caso seja passado um <code>array</code>, <code>vector</code> ou <code>matrix</code>, ser√° utilizado apenas o primeiro elemento (√© melhor evitar usar arrays como condi√ß√µes!). Ser√° enviado um aviso de que isso ocorreu.</p></li>
<li><p><code>else</code> e <code>else if</code> s√£o opcionais.</p></li>
</ul>

<h2>for</h2>

<p>O <code>for</code> √© um tipo &quot;la√ßo&quot; (<em>loop</em>, em ingl√™s) que aplica um bloco de </p>

<h3>Estrutura:</h3>

<pre><code class="r">for(iterador in &lt;sequencia&gt;) {
  # Fazer algo para cada item da &lt;sequencia&gt;
  # pode ter outros for&#39;s aqui dentro!
}
</code></pre>

<h3>Exemplo:</h3>

<p>O uso mais simples √© quando iteramos em um vetor de inteiros, como se fossem contadores.</p>

<pre><code class="r">for(i in 1:5) {
  print(i)
}
</code></pre>

<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
</code></pre>

<p>Mas podemos iterar em um vetor qualquer.</p>

<pre><code class="r">frutas &lt;- c(&quot;banana&quot;, &quot;uva&quot;, &quot;abacaxi&quot;)

# Brincadeira da &lt;fruta&gt; + &quot;guei&quot;
for(fruta in frutas) {
  print(paste(fruta, &quot;guei&quot;, sep = &quot;&quot;))
}
</code></pre>

<pre><code>## [1] &quot;bananaguei&quot;
## [1] &quot;uvaguei&quot;
## [1] &quot;abacaxiguei&quot;
</code></pre>

<p>Para cada item do vetor <code>frutas</code>, o <code>for</code> atribuiu ao objeto <code>fruta</code> o valor do respectivo item e aplicou a fun√ß√£o <code>print(paste(fruta, &quot;guei&quot;, sep = &quot;&quot;))</code>.</p>

<p>Formas alternativas com o mesmo comportamento que o acima:</p>

<pre><code class="r"># repare nos []&#39;s depois do vetor &#39;frutas&#39;
for(i in 1:length(frutas)) {
  print(paste(frutas[i], &quot;guei&quot;, sep = &quot;&quot;))
}

# seq_along() √© uma fun√ß√£o especialmente √∫til para for&#39;s
for(i in seq_along(frutas)) {
  print(paste(frutas[i], &quot;guei&quot;, sep = &quot;&quot;))
}
</code></pre>

<p><strong>OBS</strong> Apesar de parecer mais &#39;elegante&#39; atribuir diretamente os valores ao iterador (como no caso do <code>fruta in frutas</code>), muitas vezes voc√™ se pegar√° na necessidade de usar os √≠ndices dos valores. Casos t√≠picos √© quando se tem um outro vetor que faz rela√ß√£o com outro. O exemplo abaixo n√£o seria poss√≠vel caso utiliz√°ssemos <code>fruta in frutas</code> no lugar de <code>i in seq_along(frutas)</code>.</p>

<pre><code class="r"># Exemplo simples de quando √© util utilizar √≠ndice em vez de valor.
frutas1 &lt;- c(&quot;banana&quot;, &quot;uva&quot;, &quot;abacaxi&quot;)
frutas2 &lt;- c(&quot;kiwi&quot;, &quot;uva&quot;, &quot;laranja&quot;)
pessoas &lt;- c(&quot;Amanda&quot;, &quot;Bruno&quot;, &quot;Caio&quot;)

for(i in seq_along(frutas1)) {
  if(frutas1[i] == frutas2[i]) {
    frutas1[i] &lt;- &quot;manga&quot; # Troca a fruta 1
    print(paste(pessoas[i], &quot;ganhou frutas repetidas. Uma delas foi trocada por manga.&quot;))
  }
}
</code></pre>

<pre><code>## [1] &quot;Bruno ganhou frutas repetidas. Uma delas foi trocada por manga.&quot;
</code></pre>

<h3><em>ifelse()</em>: <em>for</em> com <em>if else</em></h3>

<p>Como veremos mais para frente, vetores s√£o quase sempre bem-vindos no R. Muitas fun√ß√µes trabalham com vetores de maneira muito conveniente e a fun√ß√£o <code>ifelse()</code> √© um exemplo disso. Ela √© a abordagem mais simples quando queremos que cada elemento de um vetor passe por algum teste l√≥gico (como no exemplo acima) para retornar um valor dependendo se a condi√ßao for <code>TRUE</code> ou <code>FALSE</code> (como nunca √© demais, d√™ um <code>?ifelse</code> para ver a documenta√ß√£o se for preciso). Abaixo est√° a replica√ß√£o do exemplo acima, mas sem a mensagem de aviso.</p>

<pre><code class="r">frutas1 &lt;- c(&quot;banana&quot;, &quot;uva&quot;, &quot;abacaxi&quot;)
frutas2 &lt;- c(&quot;kiwi&quot;, &quot;uva&quot;, &quot;laranja&quot;)
pessoas &lt;- c(&quot;Amanda&quot;, &quot;Bruno&quot;, &quot;Caio&quot;)

frutas1 &lt;- ifelse(frutas1 == frutas2, &quot;manga&quot;, frutas1)
</code></pre>

<p>O c√≥digo acima est√° dizendo que se os respectivos elementos de frutas1 e frutas2 calharem de serem iguais, ent√£o substitua por &quot;manga&quot;. Se forem diferentes, ent√£o mantenha a fruta 1 original. Finalmente, atualize o vetor <code>frutas1</code>.</p>

<p>Na parte de vetoriza√ß√£o ser√° descrita com mais detalhe o que est√° acontecendo por tr√°s dos panos.</p>

<h3>Considera√ß√µes:</h3>

<p>O uso do <em>for</em>, ao contr√°rio das outras linguagens de programa√ß√£o, se tornar√° cada vez menos frequente conforme voc√™ for se aprimorando no R. Ele √© especialmente ineficiente no R e, al√©m disso, existem outras fun√ß√µes que o substituem e ainda facilitam muito mais a vida.</p>

<h2>while</h2>

<p>O la√ßo <code>while</code> √© especialmente √∫til quando n√£o sabemos quando iremos parar (a condi√ß√£o para o la√ßo deixar de rodar pode envolver o acaso ou converg√™ncia, por exemplo). Cuidado com os <em>loops</em> infinitos! =)</p>

<h3>Estrutura:</h3>

<p>A estrutura √© muito similar ao <code>if</code>. Tem a condi√ß√£o (ou teste l√≥gico) e a express√£o a ser executada enquanto a condi√ß√£o for verdadeira.</p>

<pre><code class="r">while(&lt;condi√ß√µes&gt;) {
  # coisas para fazzer enquanto as &lt;condi√ß√µes&gt; forem TRUE
}
</code></pre>

<h3>Exemplo:</h3>

<p>Abaixo est√° uma simula√ß√£o de lan√ßamento de moedas do qual se tem interesse em saber quantos lan√ßamentos foram necess√°rios at√© o aparecimento de uma &quot;cara&quot;.</p>

<pre><code class="r">p &lt;- 0.2 # probabilidade de cair &quot;cara&quot;
lances &lt;- 0 # contador de lan√ßamentos
while(runif(1) &gt; p) {
  lances &lt;- lances + 1
}

lances
</code></pre>

<pre><code>## [1] 4
</code></pre>

<p>A fun√ß√£o <code>runif(1)</code> gera um n√∫mero aleat√≥rio no intervalo unit√°rio toda vez que a condi√ß√£o √© avaliada. Se este n√∫mero for maior que <code>p</code>, ent√£o a moeda e lan√ßada novamente e o contador de lan√ßamentos √© incrementado em uma unidade e esse ciclo se repete at√© que, por acaso, o n√∫mero sorteado seja menor que <code>p</code>. No fim, teremos nossa desejada vari√°vel aleat√≥ria simulada de lances at√© &quot;cara&quot;.</p>

<p>Repare que enquanto a condi√ß√£o retornava <code>TRUE</code>, a express√£o sera reexecutada. O la√ßo s√≥ parou quando a condi√ß√£o retornou <code>FALSE</code>. Essa √© a regra do <code>while</code>.</p>

<h1>Vetoriza√ß√£o</h1>

<p>Vetores no R s√£o cadeias ordenadas de elementos (geralmente n√∫meros ou palavras) e s√£o os objetos de maior interesse porque s√£o eles que guardam os dados a serem analisados. Por essa raz√£o que quase tudo feito no R aceita de bra√ßos abertos um &quot;vetor&quot; (entre aspas por que &quot;vetor&quot; aqui pode ser vetor, matriz, tabela, lista e afins, tipos de objetos que ser√£o explicados em detalhes na pr√≥xima aula).</p>

<p>Se voc√™ √© novo no mundo da programa√ß√£o, n√£o vai sentir muito a vantagem desse conceito. Aos que j√° est√£o acostumados a programar em outras lingaguens de programa√ß√£o se ver√£o tentados a usar <em>loops</em> para tudo. Isso ter√° de mudar (e ir√°, naturalmente). Como frisado anteriormente, <em>loops</em> no R s√£o sofrivelmente ineficientes.</p>

<h2>Tecnicalidades</h2>

<p>Tecnicamente, vetoriza√ß√£o nada mais √© do que a cultura de se criar e usar fun√ß√µes vetorizadas. Essas fun√ß√µes recebem vetor(es) [x1, ..., xn] e devolvem vetor(es) [f(x1), ..., f(xn)]. Mas por qu√™ √© importante, afinal?</p>

<p>Implementar fun√ß√µes vetorizadas seria uma tarefa simples, n√£o fosse a lentid√£o dos <em>loops</em>. No R, fun√ß√µes vetorizadas realmente √∫teis s√£o implementadas nas linguagens de baixo n√≠vel, que s√£o muito mais r√°pidas. Por isso, a n√£o ser que domine C, FORTRAN ou C++, voc√™ ficar√° dependente das fun√ß√µes vetorizadas dispon√≠veis pelo R ou por terceiros.</p>

<h2>Efici√™ncia</h2>

<p>Abaixo est√° um exemplo que mostra a diferen√ßa de tempo que leva para calcular a raiz quadrada de cada elemento de um vetor de n√∫meros. </p>

<ul>
<li>Uma das fun√ß√µes est√° implementada inteiramente em R utilizando um <em>for</em> para calcular a raiz quadrada em cada elemento do vetor por meio da fun√ß√£o <code>sqrt()</code>;</li>
<li>Uma segunda maneira de efetuar a mesma opera√ß√£o tira proveito da implementa√ß√£o vetorizada em C da fun√ß√£o <code>sqrt()</code>.</li>
</ul>

<pre><code class="r">x &lt;- 1:1000000 # sequ√™ncia de inteiros de 1 a 1000000

# fun√ß√£o que calcula a raiz quadrada de cada elemento de um vetor de n√∫meros
meu_sqrt &lt;- function(numeros) {
  resp &lt;- numeric(length(numeros))
  for(i in seq_along(numeros)) {
    resp[i] &lt;- sqrt(numeros[i])
  }
  return(resp)
}

# Compara√ß√£o de efici√™ncia entre fun√ß√£o vetorizada e fun√ß√£o &quot;vetorizada no R&quot;
system.time(x2a &lt;- meu_sqrt(x))
</code></pre>

<pre><code>##    user  system elapsed 
##    2.60    0.00    2.67
</code></pre>

<pre><code class="r">system.time(x2b &lt;- sqrt(x))
</code></pre>

<pre><code>##    user  system elapsed 
##    0.01    0.00    0.02
</code></pre>

<pre><code class="r"># Verifica que os dois vetores s√£o iguais
identical(x2a, x2b)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>Um ganho de 200 vezes na efici√™ncia! E as vantagens n√£o param por a√≠:</p>

<ol>
<li>Essas fun√ß√µes foram constru√≠das e testadas por pessoas que ganham a vida fazendo isso;</li>
<li>No R, uma fun√ß√£o √© &quot;esperta&quot; e funciona para diferentes tipos de objetos que passamos a ela, muitas vezes da forma que esperamos.</li>
</ol>

<h2>Reciclagem</h2>

<p>Um conceito que caminha junto com a vetoriza√ß√£o √© a chamada Reciclagem. Um exemplo ajuda a esclarecer o que isso significa.</p>

<pre><code class="r">x &lt;- c(1,5)
y &lt;- c(1,10,100,1000)
x + y
</code></pre>

<pre><code>## [1]    2   15  101 1005
</code></pre>

<p>Neste exemplo estamos somando dois vetores de tamanhos diferentes. Na matem√°tica isso n√£o faz sentido, mas no R faz! E qual conven√ß√£o se usa para que essa opera√ß√£o seja bem definida? A resposta √© Reciclagem. O operador <code>+</code> √© uma fun√ß√£o vetorizada e que est√° programado para lidar com quase qualquer tipo de soma que o usu√°rio queira desafi√°-lo a fazer. Ao ser incumbido da √°rdua miss√£o de somar dois vetores de tamanhos diferentes, o <code>+</code> &quot;recicla&quot; os valores do menor vetor, no caso o vetor <code>x</code>, reutilizando seus valores at√© preencher o vetor maior. </p>

<p>Esta conven√ß√£o aparece sempre que poss√≠vel no R e vale tomar cuidado: h√° vezes em que o R n√£o avisa que reciclou valores.</p>

<h1>Fun√ß√µes</h1>

<p>Fun√ß√µes s√£o grandes trunfos das linguagens de programa√ß√£o. Fun√ß√£o no R tem a mesma finalidade das fun√ß√µes das demais linguagens: evitar repetir c√≥digos e construir abstra√ß√µes. Fun√ß√µes deixam o c√≥digo mais leg√≠vel, elegante e menos repetitivo. Al√©m disso, fun√ß√µes abstraem uma rotina para casos mais gerais por meio de par√¢metros, fazendo-a √∫til para casos al√©m daquela configura√ß√£o espec√≠fica que motivou sua implementa√ß√£o.</p>

<h2>Estrutura</h2>

<pre><code class="r">nome_da_funcao &lt;- function(&lt;par√¢metros&gt;) {
  # faz coisas com os par√¢metros
  resultado
}

# uso da fun√ß√£o
nome_da_funcao(param1, param2, ...)
</code></pre>

<p>Pontos relevantes:</p>

<ul>
<li><p>Fun√ß√µes tamb√©m s√£o objetos! Ali√°s, tudo que voc√™ atribui com <code>&lt;-</code> vira um objeto no R. Assim, √© natural pensar que fun√ß√µes podem receber outras fun√ß√µes como argumento e isso √© bem comum.</p></li>
<li><p>Assim que uma fun√ß√£o for atribu√≠da a um objeto, use esta fun√ß√£o como se ela tivesse vinda com o R: <code>nome_da_funcao(...)</code>.</p></li>
</ul>

<h2>Par√¢metros</h2>

<p>Fun√ß√µes aceitam quaisquer e quantos par√¢metros precisar e retorna um objeto, de qualquer tipo, inclusive nada (<code>NULL</code>). No lugar do <code>&lt;par√¢metros&gt;</code> voc√™ pode colocar nomes que servir√£o de objetos (n√∫mero, texto, vetor, lista, etc.) dentro da sua fun√ß√£o.</p>

<h3>Par√¢metros opcionais</h3>

<p>Par√¢metros s√£o objetos cujos valores devem ser atribu√≠dos pelo usu√°rio. Por√©m, existem par√¢metros opcionais, que assumem um dado valor padr√£o caso o usu√°rio opte por n√£o especificar explicitamente.</p>

<pre><code class="r"># fun√ß√£o que ecoa uma palavra
ecoar &lt;- function(palavra, n_ecos = 3) {
    paste(c(rep(palavra, n_ecos), &quot;!&quot;), collapse = &quot; &quot;)
}
</code></pre>

<h3>Par√¢metros relativos</h3>

<p>Al√©m de par√¢metros opcionais, podem existir par√¢metros cujo valor padr√£o usa o valor de outro par√¢metro. Exemplo:</p>

<pre><code class="r"># Fun√ß√£o que desenha um histograma
histograma &lt;- function(numeros, xlab = &quot;x&quot;, titulo = paste(&quot;Histograma de&quot;, xlab)) {
  hist(numeros, xlab = xlab, main = titulo)
}

# Simula 1000 medidas de altura de pessoas de uma Normal com m√©dia 1,80 e desvio padr√£o de 0,1.
altura &lt;- rnorm(n = 1000, mean = 1.80, sd = 0.1)
histograma(altura, &quot;altura&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-25-1.png" alt="plot of chunk unnamed-chunk-25"> </p>

<pre><code class="r">histograma(altura, &quot;altura&quot;, &quot;Eu escolho o t√≠tulo que eu quiser&quot;)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-25-2.png" alt="plot of chunk unnamed-chunk-25"> </p>

<p>O par√¢metro <code>xlab</code> define o t√≠tulo do eixo x enquanto <code>titulo</code> escreve o t√≠tulo principal do gr√°fico. Este √∫ltimo ir√° utilizar o nome passado para o eixo x para criar o seu valor padr√£o.</p>

<h3>Ordem ou nome</h3>

<p>Podemos passar valores aos par√¢metros explicitamente ou implicitamente. Passar valor explicitamente significa associar o valor desejado ao nome do par√¢metro. Por exemplo, no c√≥digo <code>rnorm(n = 1000, mean = 1.80, sd = 0.1)</code> est√° claro qual valor ser√° passado para cada par√¢metro. Se quisermos omitir os nomes dos par√¢metros, as fun√ß√µes ter√£o a boa vontade de deduzir a qual par√¢metro voc√™ deseja atribuir certo valor e isso √© feito utilizando a ORDEM dos par√¢metros definidos na cria√ß√£o da fun√ß√£o. No comando <code>histograma(altura, &quot;altura&quot;)</code> nenhum par√¢metro foi diretamente definido, mas pela ordem, o vetor <code>altura</code> foi atribu√≠do ao par√¢metro <code>numeros</code> e a <em>string</em> <code>&quot;altura&quot;</code> foi atribu√≠da ao par√¢metro <code>xlab</code> da fun√ß√£o <code>histograma()</code>. A vers√£o &quot;expl√≠cita&quot; desse comando seria <code>histograma(numeros = altura, xlab = &quot;altura&quot;)</code>.</p>

<p><strong>OBS:</strong> Misturar as formas, expl√≠citas e impl√≠citas, tamb√©m funciona e vers√µes expl√≠citas aceitam que os par√¢metros sejam passados fora de ordem. A express√£o <code>histograma(xlab = &quot;altura&quot;, altura)</code> daria certo tamb√©m!</p>

<p><strong>OBS 2:</strong> Se n√£o for amb√≠guo, o R aceita que apenas parte do nome do par√¢metro seja passado. No nosso exemplo, <code>histograma(altura, t = &quot;Eu escolho o t√≠tulo que eu quiser&quot;, x = &quot;altura&quot;)</code> levaria ao mesmo resultado que todos os citados at√© aqui.</p>

<h3>Par√¢metro &quot;...&quot;</h3>

<p>Existe um par√¢metro especial e frequentemente dispon√≠vel em fun√ß√µes que √© simbolizado por tr√™s pontinhos &quot;...&quot;. Esse argumento indica que pode ser passado um n√∫mero vari√°vel de par√¢metros e que, geralmente, estes ser√£o repassados para outras fun√ß√µes. </p>

<p>Uma utilidade √© quando voc√™ deseja fazer poss√≠vel mexer nos par√¢metros de uma fun√ß√£o, mas n√£o quer copiar todos os seus par√¢metros novamente. Retomemos o exemplo da fun√ß√£o <code>histograma()</code>:</p>

<pre><code class="r">histograma &lt;- function(numeros, xlab = &quot;x&quot;, titulo = paste(&quot;Histograma de&quot;, xlab), ...) {
  hist(numeros, xlab = xlab, main = titulo, ...)
}

histograma(altura, breaks = 100, col = 2)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-26-1.png" alt="plot of chunk unnamed-chunk-26"> </p>

<p>Repare que nunca precisamos definir os par√¢metros <code>breaks</code> e <code>col</code> na fun√ß√£o <code>histograma()</code>. O ... fez o trabalho de enviar essas informa√ß√µes √† fun√ß√£o <code>hist()</code>.</p>

<p>Um segundo cen√°rio que ... se faz √∫til √© quando uma fun√ß√£o aceita um n√∫mero indefinido de argumentos. Um exemplo disso √© a fun√ß√£o <code>paste()</code>, que concatena palavras. A ela, podemos passar quantas palavras quisermos. N√£o fosse o ..., ter√≠amos que ter os par√¢metros <code>(palavra1, palavra2, palavra3, ...)</code>. Sem chances.</p>

<pre><code class="r">args(paste)
</code></pre>

<pre><code>## function (..., sep = &quot; &quot;, collapse = NULL) 
## NULL
</code></pre>

<pre><code class="r">paste(&quot;Eu&quot;, &quot;sou&quot;, &quot;o&quot;, &quot;capit√£o&quot;, &quot;planeta&quot;)
</code></pre>

<pre><code>## [1] &quot;Eu sou o capit√£o planeta&quot;
</code></pre>

<h2>Fun√ß√µes an√¥nimas</h2>

<p>As fun√ß√µes an√¥nimas s√£o frequentemente utilizadas e t√™m essa denomina√ß√£o pois n√£o nos damos o trabalho de defini-las como um objeto permanente no nosso ambiente de trabalho. Veja o exemplo abaixo:</p>

<pre><code class="r">nums &lt;- 1:10

eh_par &lt;- sapply(nums, function(numero) {numero %% 2 == 0})

cbind(nums, eh_par) 
</code></pre>

<pre><code>##       nums eh_par
##  [1,]    1      0
##  [2,]    2      1
##  [3,]    3      0
##  [4,]    4      1
##  [5,]    5      0
##  [6,]    6      1
##  [7,]    7      0
##  [8,]    8      1
##  [9,]    9      0
## [10,]   10      1
</code></pre>

<p>N√£o se preocupe em entender tudo o que o c√≥digo acima est√° fazendo, voc√™ aprender√° adiante tudo sobre a fun√ß√£o <code>sapply()</code> e <code>cbind()</code>. O ponto deste exemplo est√° na parte <code>function(numero) {numero %% 2 == 0}</code>. Este peda√ßo de c√≥digo define uma fun√ß√£o, mas essa fun√ß√£o n√£o tem nome! Apesar disso, ela continua sendo um objeto e pode ser passada como par√¢metro de fun√ß√£o, assim como far√≠amos com n√∫meros, textos e vetores. Caso a fun√ß√£o fosse √∫til em outros contextos ou tivesse que ser repetida em outra parte do c√≥digo, poder√≠amos guard√°-la no ambiente de trabalho, como mostra o exemplo que segue:</p>

<pre><code class="r">testa_se_eh_par &lt;- function(numero) {
  numero %% 2 == 0
}

eh_par &lt;- sapply(nums, testa_se_eh_par)
</code></pre>

<p>O resultado √© id√™ntico como deveria ser, mas agora a fun√ß√£o tem nome e pode ser utilizada conforme a conveni√™ncia.</p>

<h1>Vocabul√°rio</h1>

<h2>Trigonometria</h2>


<pre><code>      FunÁ„o                      DescriÁ„o          
</code></pre>

<hr>

<p>cos(x) / sin(x) / tan(x)    seno/cosseno/tangente de x  </p>

<p>acos(x) / asin(x) / atan(x) arco-seno/cosseno/tangente de</p>

<h2>                                          x              </h2>

<h2>Matem√°tica</h2>


<p>FunÁ„o           DescriÁ„o       </p>

<hr>

<p>log(x)    Logaritmo natural de x </p>

<p>exp(x)         e elevado a x     </p>

<p>abs(x)      valor absoluto de x  </p>

<p>sign(x)     sinal de x (1 ou -1)  </p>

<p>sqrt(x)      raiz quadrada de x   </p>

<p>choose(n, k) combinaÁıes de n, k a k</p>

<h2>factorial(x)      fatorial de x     </h2>

<h2>Estat√≠stica</h2>


<pre><code>   FunÁ„o                 DescriÁ„o        
</code></pre>

<hr>

<pre><code>   mean(x)               MÈdia de x        
</code></pre>

<p>var(x) / sd(x)     Vari‚ncia / Desvio Padr„o
                            amostral de x      </p>

<pre><code> quantile(x)            Quantis de x       
</code></pre>

<p>cov(x, y) / cor(x, y) Covari‚ncia / CorrelaÁ„o </p>

<h2>                         linear entre x e y    </h2>

<h2>Diversos</h2>


<p>FunÁ„o           DescriÁ„o         </p>

<hr>

<p>x:y       Sequencia de x atÈ y    </p>

<p>x=y      x recebe y (atribuiÁ„o)  </p>

<p>?x         documentaÁ„o de x     </p>

<p>x$y     extraÁ„o de y do objeto x </p>

<p>x%*%y   MultiplicaÁ„o matricial das</p>

<h2>               matrizes x e y       </h2>

<h1>Refer√™ncias</h1>

<p><a href="http://adv-r.had.co.nz/Functions.html">http://adv-r.had.co.nz/Functions.html</a></p>

<p><a href="http://www.burns-stat.com/pages/Tutor/R_inferno.pdf">http://www.burns-stat.com/pages/Tutor/R_inferno.pdf</a></p>

<h1>Pr√≥xima aula</h1>

              <div id="disqus_thread"></div>
            </li>
          </ol>
          <div class="pagination">
            <ul>
              <li><a href="http://curso-r.github.io">&#171; Back Home</a></li>
            </ul>
          </div> 
        </div>
			</div>
		</div>
  </div>
</body>
  <script src='../libraries/frameworks/purus/js/bootstrap.min.js'></script>
  <div class="fb-comments" data-href="http://developers.facebook.com/docs/plugins/comments/" data-width="100%" data-numposts="5" data-colorscheme="light"></div>
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- Google Prettify -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
  <script src='../libraries/highlighters/prettify/js/lang-r.js'></script>
  <script>
    var pres = document.getElementsByTagName("pre");
    for (var i=0; i < pres.length; ++i) {
      pres[i].className = "prettyprint linenums";
    }
    prettyPrint();
  </script>
  <!-- End Google Prettify --> 
  </html>